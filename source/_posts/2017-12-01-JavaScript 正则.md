---
title: JavaScript 正则
date: 2017-12-01
updated: 2018-3-01
tags: js
---

#正则表达式


>正则表达式(regular expression)描述了一种字符串匹配的模式（pattern），可以用来检查一个串是否含有某种子串、将匹配的子串替换或者从某个串中取出符合某个条件的子串等。

## 语法

* **`^`** 匹配输入字符串的开始位置。若在方括号表达式开头中使用，此时它表示不接受该字符集合。

* **`$`** 匹配输入字符串的结尾位置。

* **`()`**标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。使用 $0…$9 属性。要匹配这些字符，请使用 `\(` 和 `\)` 。

* **`*`** 匹配前面的子表达式零次或多次，等价于 `{0,}`。

* **`+`** 匹配前面的子表达式一次或多次，等价于 `{1,}`。

* **`?`** 匹配前面的子表达式零次或一次，等价于 `{0,1}` 。当该字符紧跟在任何一个其他限制符 (`*`, `+`,`?`, `{n}`, `{n,}`, `{n,m})` 后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。

* **`.`** 匹配除换行符 `\n` 之外的任何单字符。要匹配包括 '\n' 在内的任何字符，可用`(.|\n)`。

* **`\`** 将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， `n` 匹配字符 `n`。`\n` 匹配换行符。序列 `\\` 匹配 `\`，而 `\(` 则匹配 `(`。

* **`[`**标记一个中括号表达式的开始。

* **`{`** 标记限定符表达式的开始。

* **`|`** 指明两项之间的一个选择。

* **`{n}`**	`n` 是一个非负整数。匹配确定的 `n` 次。

* **`{n,}`** `n` 是一个非负整数。至少匹配`n`次。


* **`{n,m}`** `m` 和 `n` 均为非负整数，其中`n` <= `m`。最少匹配 `n` 次且最多匹配 `m` 次。

* **`\b`** 匹配一个字边界，即字与空格间的位置。如果它位于要匹配的字符串的开始，它在单词的开始处查找匹配项。如果它位于字符串的结尾，它在单词的结尾处查找匹配项。  
Chapter：  
`/\bCha/` //匹配Chapter的开头三个字符  
`/ter\b/` //匹配Chapter的结尾三个字符

* **`\B`** 表示非单词边界。位置并不重要，因为匹配不关心究竟是单词的开头还是结尾。  
下面的表达式匹配 Chapter 中的字符串 apt，但不匹配 aptitude 中的字符串 apt  
`/\Bapt/`

* **`\d`**	匹配一个数字字符。等价于 [0-9]。

* **`\D`**	匹配一个非数字字符。等价于 [^0-9]。

* **`\f`**	匹配一个换页符

* **`\n`**	匹配一个换行符

* **`\r`**	匹配一个回车符

* **`\t`**	匹配一个制表符

* **`\v`**	匹配一个垂直制表符

* **`\s`**	匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。

* **`\S`**	匹配任何非空白字符。等价于 [^ \f\n\r\t\v]。

* **`\w`**	匹配包括下划线的任何单词字符。等价于'[A-Za-z0-9_]'。

* **`\W`**	匹配任何非单词字符。等价于 '[^A-Za-z0-9_]'。

* **`g`** 全局标记，指定将该表达式应用到输入字符串中能够查找到的尽可能多的匹配

* **`i`** 标记指定不区分大小写。表达式的结尾处



>对一个正则表达式模式或部分模式两边添加圆括号将导致相关匹配存储到一个临时缓冲区中，所捕获的每个子匹配都按照在正则表达式模式中从左到右出现的顺序存储。缓冲区编号从 1 开始，最多可存储 99 个捕获的子表达式。每个缓冲区都可以使用 \n 访问，其中 n 为一个标识特定缓冲区的一位或两位十进制数。  
可以使用非捕获元字符 ?:、?= 或 ?!   

>**`?:`**非获取匹配。匹配但不获取匹配结果，不存储供以后使用。这在使用 "或" 字符 (|) 来组合一个模式的各个部分是很有用。例如， 'industr(?:y|ies) 就是一个比 'industry|industries' 更简略的表达式。  

>**`?=`**正向预查，在任何匹配的字符串开始处匹配查找字符串。非获取匹配，不获取供以后使用。例如，'Windows (?=95|98|NT|2000)' 能匹配 "Windows 2000" 中的 "Windows" ，但不能匹配 "Windows 3.1" 中的 "Windows"。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。

>**`?!`**负向预查，在任何不匹配的字符串开始处匹配查找字符串。非获取匹配，不获取供以后使用。例如'Windows (?!95|98|NT|2000)' 能匹配 "Windows 3.1" 中的 "Windows"，但不能匹配 "Windows 2000" 中的 "Windows"。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。


## 优先级
从高到低的优先级顺序：

1. **`\`**	转义符
2. **`()`**, **`(?:)`** , **`(?=)`**, **`[]`**	圆括号和方括号
3. **`*`**, **`+`** , **`?`**, **`{n}`**, **`{n,}`**, **`{n,m}`**	限定符
4. **`^`**, **`$`**, **`\任何元字符、任何字符`**	定位点和序列（即：位置和顺序）
5. **`|`**	替换，"或"操作
字符具有高于替换运算符的优先级，使得"m|food"匹配"m"或"food"。若要匹配"mood"或"food"，请使用括号创建子表达式，从而产生"(m|f)ood"。

## 实例

* [xyz]	字符集合。匹配所包含的任意一个字符。例如， '[abc]' 可以匹配 "plain" 中的 'a'。
* [^xyz]	负值字符集合。匹配未包含的任意字符。例如， '[^abc]' 可以匹配 "plain" 中的'p'、'l'、'i'、'n'。


* 将通用资源指示符 (URI) 分解为其组件
```javascript
var str = "https://www.baidu.com:80/index.html";
var patt1 = /(\w+):\/\/([^/:]+)(:\d*)?([^# ]*)/;
arr = str.match(patt1);
for (var i = 0; i < arr.length ; i++) {
    document.write(arr[i]);
	document.write("<br>");
}
//https://www.baidu.com:80/index.html
//https
//www.baidu.com
//:80
///index.html
```
